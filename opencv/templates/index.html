<html>
  <head>
    <title>Video Streaming Demonstration</title>
  </head>
  <body>
    <h1>Video Streaming Demonstration</h1>
    <img src="/camera">
    <button id="getBounds" disabled>Get Bounds</button>
    <div id="boundsDisp"></div>
    <button id="snapshot">Snapshot</button>
    <div id="snapshotResult"></div>
    <div id="configOptions">
      <input type="text" name="threshold" id="thresholdConfig">
    </div>
    <script>
      (function () {
        "use strict";

        let thresholdConfigElement = document.getElementById("thresholdConfig")
        // console.log(thresholdConfigElement);
        thresholdConfigElement.addEventListener("submit", function (event) {
          console.log("hi");
          console.log(new FormData(thresholdConfigElement));
          // event.preventDefault();
          fetch(
            "/config", {
              method: "POST",
              data: {threshold: thresholdConfigElement.value},
            }
          ).finally(function () {
            thresholdConfigElement.value = "";
          })
        });

        let snapshotButton = document.getElementById("snapshot");
        snapshotButton.addEventListener("click", function (event) {
          fetch("/snap", {
            method: "POST"
          }).then(function (response) {
            document.getELementById("snapshotResult").textContent = response.body;
          })
        });

      })();
    </script>
  </body>
</html>